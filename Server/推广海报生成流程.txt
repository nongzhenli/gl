

1、扫描带参数二维码
2、关注
     ① 如果带参数，获取参数：parent_id，否则0
     ② 数据库新增 User、wxUser、FansRecord，记录 推荐人、活动id

3、生成海报：
     ① 生成带参数推广二维码
     ② 传参：text、imges、background
     ③ 合成海报图，保存到指定服务器路径，并返回地址
     ④ 根据服务器地址上传临时素材，并且返回媒体id
     ⑤ 主动触发获取推广海报，判断数据库是否存在，如果存在则不重新生成（不上传临时素材），直接从服务器地址获取

4、更新记录，FansRecord表：推广海报url、海报有效期

5*  新用户每次关注，除了做以上操作外：
      ① 检查推荐人（如果有）下级数量，并推送模板消息
      ② 当推荐人下级个数达到条件时，推送完成领取消息